<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商談支援金シミュレーター</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #f3f4f6;
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
        }
        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            appearance: none;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div class="w-full max-w-2xl bg-white rounded-2xl shadow-xl overflow-hidden">
        <!-- Header -->
        <div class="bg-gradient-to-r from-slate-700 to-slate-900 p-6 text-white">
            <h1 class="text-2xl font-bold text-center">MFP 商談支援金シミュレーター</h1>
            <p class="text-center text-gray-300 text-sm mt-2">機種と条件を選択して実質仕切を確認できます</p>
        </div>

        <!-- Input Section -->
        <div class="p-8 space-y-6">
            <!-- Model Selection -->
            <div>
                <label for="modelSelect" class="block text-sm font-bold text-gray-700 mb-2">機種名</label>
                <div class="relative">
                    <select id="modelSelect" class="block w-full bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-blue-500 focus:border-blue-500 p-3 shadow-sm transition hover:border-blue-400">
                        <!-- Options populated by JS -->
                    </select>
                </div>
            </div>

            <!-- Category Selection -->
            <div>
                <label for="categorySelect" class="block text-sm font-bold text-gray-700 mb-2">支援項目（条件）</label>
                <div class="relative">
                    <select id="categorySelect" class="block w-full bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 p-3 shadow-sm transition hover:border-blue-400">
                        <!-- Options populated by JS -->
                    </select>
                </div>
            </div>
        </div>

        <!-- Result Section -->
        <div class="bg-gray-50 p-8 border-t border-gray-200">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                
                <!-- 定価 -->
                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col justify-between h-24">
                    <span class="text-xs text-gray-500 font-bold uppercase tracking-wider">定価</span>
                    <div class="text-right">
                        <span id="listPrice" class="text-2xl font-semibold text-gray-700">-</span>
                        <span class="text-sm text-gray-500 ml-1">円</span>
                    </div>
                </div>

                <!-- 仕切価格 -->
                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col justify-between h-24">
                    <span class="text-xs text-gray-500 font-bold uppercase tracking-wider">仕切価格</span>
                    <div class="text-right">
                        <span id="wholesalePrice" class="text-2xl font-semibold text-gray-800">-</span>
                        <span class="text-sm text-gray-500 ml-1">円</span>
                    </div>
                </div>

                <!-- 支援金額 -->
                <div class="bg-green-50 p-4 rounded-xl border border-green-200 shadow-sm flex flex-col justify-between h-24 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-1 h-full bg-green-500"></div>
                    <span class="text-xs text-green-700 font-bold uppercase tracking-wider flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                        支援金額
                    </span>
                    <div class="text-right">
                        <span id="supportAmount" class="text-3xl font-bold text-green-600">-</span>
                        <span class="text-sm text-green-600 ml-1">円</span>
                    </div>
                </div>

                <!-- 実質仕切 -->
                <div class="bg-blue-600 p-4 rounded-xl shadow-lg flex flex-col justify-between h-24 transform md:scale-105 border border-blue-700 relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10">
                        <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a8 8 0 100 16 8 8 0 000-16zm1 11H9v-2h2v2zm0-4H9V5h2v4z"/></svg>
                    </div>
                    <span class="text-xs text-blue-100 font-bold uppercase tracking-wider">実質仕切 (仕切 - 支援)</span>
                    <div class="text-right relative z-10">
                        <span id="realWholesalePrice" class="text-3xl font-extrabold text-white">-</span>
                        <span class="text-sm text-blue-100 ml-1">円</span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Data & Logic -->
    <script>
        // --- データ定義 ---
        // supports配列の順序:
        // [0:ロイヤル<100, 1:ロイヤル>=100/官, 2:非ロイヤル<100, 3:非ロイヤル>=100/官, 4:新規<30, 5:新規30-99, 6:新規>=100]
        const models = [
            { 
                name: "iR C3322F", 
                listPrice: "オープン", 
                wholesale: 334740, 
                supports: [15000, 45000, 0, 30000, 20000, 40000, 50000] 
            },
            { 
                name: "iR ADVANCE DX 4925F", 
                listPrice: 1460000, 
                wholesale: 447300, 
                supports: [20000, 60000, 0, 40000, 20000, 40000, 60000] 
            },
            { 
                name: "iR ADVANCE DX C4935F", 
                listPrice: 1850000, 
                wholesale: 588000, 
                supports: [30000, 90000, 0, 60000, 20000, 40000, 80000] 
            },
            { 
                name: "iR ADVANCE DX C4945F", 
                listPrice: 2080000, 
                wholesale: 684180, 
                supports: [75000, 225000, 0, 150000, 20000, 40000, 170000] 
            },
            { 
                name: "iR ADVANCE DX 6860", 
                listPrice: 2830000, 
                wholesale: 879060, 
                supports: [125000, 375000, 0, 250000, 20000, 40000, 270000] 
            },
            { 
                name: "iR ADVANCE DX 6870", 
                listPrice: 3410000, 
                wholesale: 1024380, 
                supports: [125000, 375000, 0, 250000, 20000, 40000, 270000] 
            },
            { 
                name: "iR ADVANCE DX 6780", 
                listPrice: 3880000, 
                wholesale: 1184400, 
                supports: [125000, 375000, 0, 250000, 20000, 40000, 270000] 
            },
            { 
                name: "iR ADVANCE DX C3926F", 
                listPrice: 1770000, 
                wholesale: 383040, 
                supports: [20000, 60000, 0, 40000, 40000, 80000, 80000] 
            },
            { 
                name: "iR ADVANCE DX C3930F", 
                listPrice: 1980000, 
                wholesale: 472920, 
                supports: [30000, 90000, 0, 60000, 60000, 120000, 120000] 
            },
            { 
                name: "iR ADVANCE DX C3935F", 
                listPrice: 2230000, 
                wholesale: 574140, 
                supports: [40000, 120000, 0, 80000, 85000, 170000, 165000] 
            },
            { 
                name: "iR ADVANCE DX C5840F", 
                listPrice: 2530000, 
                wholesale: 711060, 
                supports: [75000, 225000, 0, 150000, 110000, 220000, 260000] 
            },
            { 
                name: "iR ADVANCE DX C5850F", 
                listPrice: 2920000, 
                wholesale: 1008000, 
                supports: [125000, 375000, 0, 250000, 160000, 320000, 410000] 
            },
            { 
                name: "iR ADVANCE DX C5860F", 
                listPrice: 3310000, 
                wholesale: 1108800, 
                supports: [125000, 375000, 0, 250000, 210000, 420000, 460000] 
            },
            { 
                name: "iR ADVANCE DX C5870F", 
                listPrice: 3700000, 
                wholesale: 1278060, 
                supports: [125000, 375000, 0, 250000, 260000, 520000, 510000] 
            },
            { 
                name: "imageFORCE 6160", 
                listPrice: 3060000, 
                wholesale: 924000, 
                supports: [125000, 375000, 0, 250000, 20000, 40000, 270000] 
            },
            { 
                name: "imageFORCE 6170", 
                listPrice: 3690000, 
                wholesale: 1079400, 
                supports: [125000, 375000, 0, 250000, 20000, 40000, 270000] 
            },
            { 
                name: "imageFORCE C5140F", 
                listPrice: 2860000, 
                wholesale: 785400, 
                supports: [75000, 225000, 0, 150000, 110000, 220000, 260000] 
            },
            { 
                name: "imageFORCE C5150F", 
                listPrice: 3160000, 
                wholesale: 1058400, 
                supports: [125000, 375000, 0, 250000, 160000, 320000, 410000] 
            },
            { 
                name: "imageFORCE C5160F", 
                listPrice: 3580000, 
                wholesale: 1167600, 
                supports: [125000, 375000, 0, 250000, 210000, 420000, 410000] 
            },
            { 
                name: "imageFORCE C7165F Pro", 
                listPrice: 3580000, 
                wholesale: 1318800, 
                supports: [125000, 375000, 0, 250000, 235000, 470000, 485000] 
            },
            { 
                name: "imageFORCE 8186", 
                listPrice: 4500000, 
                wholesale: 1722000, 
                supports: [150000, 450000, 0, 300000, 20000, 40000, 320000] 
            },
            { 
                name: "imageFORCE 8186P", 
                listPrice: 4000000, 
                wholesale: 1512000, 
                supports: [150000, 450000, 0, 300000, 20000, 40000, 320000] 
            },
            { 
                name: "imageFORCE 8195", 
                listPrice: 5500000, 
                wholesale: 2058000, 
                supports: [200000, 600000, 0, 400000, 20000, 40000, 420000] 
            },
            { 
                name: "imageFORCE 8195P", 
                listPrice: 5000000, 
                wholesale: 1848000, 
                supports: [200000, 600000, 0, 400000, 20000, 40000, 420000] 
            },
            { 
                name: "imageFORCE 8105", 
                listPrice: 6500000, 
                wholesale: 2394000, 
                supports: [250000, 750000, 0, 500000, 20000, 40000, 520000] 
            },
            { 
                name: "imageFORCE 8105P", 
                listPrice: 6000000, 
                wholesale: 2184000, 
                supports: [250000, 750000, 0, 500000, 20000, 40000, 520000] 
            },
            { 
                name: "imageFORCE C331", 
                listPrice: 890000, 
                wholesale: 306600, 
                supports: [0, 0, 0, 0, 20000, 40000, 20000] 
            },
            { 
                name: "imageFORCE C431", 
                listPrice: 980000, 
                wholesale: 340200, 
                supports: [0, 0, 0, 0, 20000, 40000, 20000] 
            },
            { 
                name: "imageFORCE C331", 
                listPrice: 890000, 
                wholesale: 306600, 
                supports: [0, 0, 0, 0, 20000, 40000, 20000] 
            },
            { 
                name: "iR ADVANCE C3530F III-RG", 
                listPrice: "オープン", 
                wholesale: 225120, 
                supports: [0, 0, 0, 0, 20000, 40000, 20000] 
            },
            { 
                name: "iR ADVANCE C5550F III-RG", 
                listPrice: "オープン", 
                wholesale: 504000, 
                supports: [0, 0, 0, 0, 20000, 40000, 20000] 
            },
            { 
                name: "imageFORCE C3150F", 
                listPrice: 3080000, 
                wholesale: 1033200, 
                supports: [0, 0, 0, 0, 500000, 500000, 500000] 
            },
            { 
                name: "imageFORCE C3150FQ", 
                listPrice: 31400000, 
                wholesale: 1054200, 
                supports: [0, 0, 0, 0, 500000, 500000, 500000] 
            }
        ];

        // 支援区分の定義
        const categories = [
            { id: 0, label: "【CtoC】ロイヤルMIF (100名未満)" },
            { id: 1, label: "【CtoC】ロイヤルMIF (100名以上・官公庁)" },
            { id: 2, label: "【CtoC】非ロイヤルMIF (100名未満)" },
            { id: 3, label: "【CtoC】非ロイヤルMIF (100名以上・官公庁)" },
            { id: 4, label: "【新規・増設・OEA】従業員 30名未満" },
            { id: 5, label: "【新規・増設・OEA】従業員 30～99名" },
            { id: 6, label: "【新規・増設・OEA】従業員 100名以上" }
        ];

        // --- DOM要素 ---
        const modelSelect = document.getElementById('modelSelect');
        const categorySelect = document.getElementById('categorySelect');
        const elListPrice = document.getElementById('listPrice');
        const elWholesalePrice = document.getElementById('wholesalePrice');
        const elSupportAmount = document.getElementById('supportAmount');
        const elRealWholesalePrice = document.getElementById('realWholesalePrice');

        // --- 初期化処理 ---
        function init() {
            // 機種プルダウン生成
            models.forEach((m, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = m.name;
                modelSelect.appendChild(option);
            });

            // カテゴリプルダウン生成
            categories.forEach(c => {
                const option = document.createElement('option');
                option.value = c.id;
                option.textContent = c.label;
                categorySelect.appendChild(option);
            });

            // イベントリスナー登録
            modelSelect.addEventListener('change', calculate);
            categorySelect.addEventListener('change', calculate);

            // 初回計算
            calculate();
        }

        // --- 計算・表示処理 ---
        function calculate() {
            const modelIndex = modelSelect.value;
            const categoryIndex = categorySelect.value;
            
            const selectedModel = models[modelIndex];
            const supportVal = selectedModel.supports[categoryIndex]; // 支援金
            const wholesaleVal = selectedModel.wholesale; // 仕切価格
            
            // 定価の表示
            if (typeof selectedModel.listPrice === 'number') {
                elListPrice.textContent = selectedModel.listPrice.toLocaleString();
            } else {
                elListPrice.textContent = selectedModel.listPrice;
            }

            // 仕切価格
            elWholesalePrice.textContent = wholesaleVal.toLocaleString();

            // 支援金額 (正の数で表示)
            const finalSupport = supportVal !== undefined ? supportVal : 0;
            elSupportAmount.textContent = finalSupport.toLocaleString();

            // 実質仕切 (仕切 - 支援)
            const realWholesale = wholesaleVal - finalSupport;
            elRealWholesalePrice.textContent = realWholesale.toLocaleString();
        }

        // アプリケーション開始
        init();

    </script>
</body>
</html>
